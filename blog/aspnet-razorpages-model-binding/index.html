<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.10.3"/><style data-href="/styles.3f33421918afaf4a4268.css" data-identity="gatsby-global-css">.layout-module--container--eLBMS{font-family:sans-serif;margin:auto;max-width:800px}.layout-module--heading--8VjLO{color:maroon;font-size:1.6rem;margin:25px 3px}.layout-module--nav-links--EROwB{background-color:#ffebcd;border-radius:10px;display:flex;list-style:none;margin:12px 0;padding:30px 10px}.layout-module--nav-link-item--pfCo2{padding-right:2rem}.layout-module--nav-link-text--ac2nV{color:#000;color:maroon;font-weight:700}.layout-module--site-title--5N6mf{color:gray;font-size:1.4rem;font-weight:700;margin:1.5rem 0}pre{word-wrap:normal;overflow:auto;white-space:pre}footer{padding:10px;text-align:center}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/webpack-runtime-0c2617bdcefff67311f8.js"/><link as="script" rel="preload" href="/framework-f24c3fbb71f117e223ab.js"/><link as="script" rel="preload" href="/app-d93e2701d6ecd8d2c363.js"/><link as="script" rel="preload" href="/component---src-pages-blog-mdx-slug-js-03812f15af53db1b7206.js"/><link as="fetch" rel="preload" href="/page-data/blog/aspnet-razorpages-model-binding/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--container--eLBMS"><title>Model Binding in ASP.NET Razor Pages<!-- --> | <!-- -->Tech Notes - johnmmoss</title><header class="layout-module--site-title--5N6mf">Tech Notes - johnmmoss</header><nav><ul class="layout-module--nav-links--EROwB"><li class="layout-module--nav-link-item--pfCo2"><a class="layout-module--nav-link-text--ac2nV" href="/">Home</a></li><li class="layout-module--nav-link-item--pfCo2"><a class="layout-module--nav-link-text--ac2nV" href="/about">About</a></li><li class="layout-module--nav-link-item--pfCo2"><a class="layout-module--nav-link-text--ac2nV" href="/blog">Blog</a></li></ul></nav><main><h1 class="layout-module--heading--8VjLO">Model Binding in ASP.NET Razor Pages</h1><p>April 2, 2022</p><p>Remember that the model binding is binding an Html form request to server side objects. The Razor framework is abstracting away the mechanics with tag helpers, pocos and attributes. To understand better, lets get back to basics...</p><h3>Html Form Post</h3><p>A simple post request looks like so:</p><pre><code class="language-html">&lt;form method=&quot;post&quot; action=&quot;https://localhost:44315/fromform&quot; enctype=&quot;multipart/form-data&quot;&gt;
    &lt;input type=&quot;text&quot; value=&quot;27&quot; name=&quot;age&quot;/&gt;
    &lt;input type=&quot;text&quot; value=&quot;John&quot; name=&quot;name&quot; /&gt;
    &lt;input type=&quot;text&quot; value=&quot;Number1&quot; name=&quot;id&quot;/&gt;

    &lt;button type=&quot;submit&quot; &gt;Go&lt;/button&gt;
&lt;/form&gt;
</code></pre><p>If the above form is posted to the following controller then the ASP.NET Web Api framework binds the attributes meaning that you can access the <code>id</code>, <code>name</code> and <code>age</code> parameters in the method:</p><pre><code class="language-c#">[HttpPost]
[Route(&quot;/fromform&quot;)]
public IActionResult GetForm([FromForm] string id, 
    [FromForm] string name, 
    [FromForm] int age)
{
    if (string.IsNullOrEmpty(id))
        return BadRequest();

    return Ok($&quot;{name} is {age} years old!&quot;);
}
</code></pre><h3>Razor Page Form Post</h3><p>By the same token, a razor page form in its simplest form can look like so:</p><pre><code class="language-html">&lt;form method=&quot;post&quot;&gt;

    &lt;input type=&quot;text&quot; name=&quot;CustomerCreateModel.FirstName&quot; value=&quot;&quot; /&gt;
    &lt;input type=&quot;text&quot; name=&quot;CustomerCreateModel.LastName&quot; value=&quot;&quot; /&gt; 
    &lt;input type=&quot;text&quot; name=&quot;CustomerCreateModel.JobRole&quot; value=&quot;&quot; /&gt;
    &lt;input type=&quot;text&quot; name=&quot;CustomerCreateModel.JobGrade&quot; value=&quot;&quot; /&gt;

    &lt;button type=&quot;submit&quot;&gt;Create&lt;/button&gt;

&lt;/form&gt;
</code></pre><p>If the Razor Page&#x27;s code behind has a <code>BindProperty</code> called  <code>CustomerCreateModel</code> which in turn is a class with the appropriate properties, then these values will all be hooked up at runtime:</p><pre><code class="language-c#">public class CustomerCreateModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime EmploymentDate { get; set; }
    public string JobRole { get; set; }
    public string JobGrade { get; set; }
}

public class CreateModel : PageModel
{
    [BindProperty]
    public CustomerCreateModel CustomerCreateModel { get; set; }
   

    public void OnPost()
    {
       // Model is bound on post back...
       var name = $&quot;{CustomerCreateModel.FirstName} {CustomerCreateModel.LastName}&quot;;
    }
}
</code></pre><p>Here is the code with a watch showing the above form being submitted:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:829px">
      <a class="gatsby-resp-image-link" href="/static/18b4e1c8d993c9224144d97653e3c466/9d76a/razor-pages-model-binding.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:52.33333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVQoz31S21LbMBTMl0BIbFlXS1Zsx/EEkkJSAikmGJh2eKPT//+FZXQcB8rtYedIlrTes3sGIrPgmQf3ORKbg5kMI6EwlilhyDiO44RwwkSHpMOIy0PtMRglEm5WQvoCzBaIjUNsPBEbP4HNS9h8Cl/VEM6BWY0kNYik/kBGhGOhEBuFSElEKgXTlupYGiTGgqcO3FiI1CFWGpFShPDuPVn4ARHaKgfPDEL7rpyBaXNos8dRxPbt8/9s6NfDvdrBmEvEWkN6D+k8tLWwxZTgygrG56Syq5buSBvsKMiOsHfFFFybTmFQYyYaLE0hUguuNVQ2gZ/O0OxatPePaG5bbK62uN7e4K59wO7uAT8u1pgvlqhPF1herDApq44wmDviAkMmSHb4eMxCohxt+4i/z/9wtdlivbrEn99PaJodrZX1OArJJ4La7gMadCMgPxgcrDhfXeJXs0M9P0M9X+Dn5hrL8zWqek4hvU+ZFHabV9K3M9YbTiqC8hDEXs1nI/OGUH56+NXZd3deABz3MM8IPwPpAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="image-20210621205428618" title="image-20210621205428618" src="/static/18b4e1c8d993c9224144d97653e3c466/9d76a/razor-pages-model-binding.png" srcSet="/static/18b4e1c8d993c9224144d97653e3c466/5a46d/razor-pages-model-binding.png 300w,/static/18b4e1c8d993c9224144d97653e3c466/0a47e/razor-pages-model-binding.png 600w,/static/18b4e1c8d993c9224144d97653e3c466/9d76a/razor-pages-model-binding.png 829w" sizes="(max-width: 829px) 100vw, 829px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><h3>Model Binding Collections</h3><p>It&#x27;s also possible to bind collections. Imagine that we have a collection of the models and we initialise some of the values on get:</p><pre><code class="language-c#">public class CreateModel : PageModel
{
    [BindProperty]
    public IList&lt;CustomerCreateModel&gt; CustomerCreateModel { get; set; }
   

    public void OnGet()
    {
        CustomerCreateModel = new List&lt;CustomerCreateModel&gt;()
        {
            new CustomerCreateModel() {FirstName = &quot;John&quot;},
            new CustomerCreateModel() {FirstName = &quot;Jane&quot;},
            new CustomerCreateModel() {FirstName = &quot;Jules&quot;},
            new CustomerCreateModel() {FirstName = &quot;Jimmy&quot;},
        };
    }

    public void OnPost()
    {
        // Model is bound on post back...
       var first = CustomerCreateModel.First();
       var name = $&quot;{first.FirstName} {first.LastName}&quot;;
    }
}
</code></pre><p>Now the <code>FirstName</code> has a value that we want to display, but if we also want to bind the remaining columns. In our view, we have a for loop which</p><pre><code class="language-html">&lt;form method=&quot;post&quot;&gt;

    @for (int i = 0; i &lt; Model.CustomerCreateModel.Count(); i++)
    {
        &lt;input type=&quot;text&quot; name=&quot;@($&quot;CustomerCreateModel[{i}].FirstName&quot;)&quot; value=&quot;@($&quot;Model.CustomerCreateModel[i].FirstName}&quot;)&quot; /&gt;
        &lt;input type=&quot;text&quot; name=&quot;@($&quot;CustomerCreateModel[{i}].LastName&quot;)&quot; value=&quot;@($&quot;{Model.CustomerCreateModel[i].LastName}&quot;)&quot; /&gt;
        &lt;input type=&quot;text&quot; name=&quot;@($&quot;CustomerCreateModel[{i}].JobRole&quot;)&quot; value=&quot;@($&quot;{Model.CustomerCreateModel[i].JobRole}&quot;)&quot; /&gt;
        &lt;input type=&quot;text&quot; name=&quot;@($&quot;CustomerCreateModel[{i}].JobGrade&quot;)&quot; value=&quot;@($&quot;{Model.CustomerCreateModel[i].JobGrade}&quot;)&quot; /&gt;
        &lt;br /&gt;

    }

    &lt;br /&gt;
    &lt;button type=&quot;submit&quot;&gt;Create&lt;/button&gt;

&lt;/form&gt;
</code></pre><p><strong>Note</strong> the above syntax in the html attributes is the razor inline <code>@(...)</code> delimiters with some string interpolation nested inside <code>$&quot;This is the {name}&quot;</code> The result is a bit messy, but does work!</p><p>Rendered, the html now looks like so:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:842px">
      <a class="gatsby-resp-image-link" href="/static/ad827bc9041213bc34efcaac00e6aff9/99072/razor-pages-model-binding-multiple-htmlview.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:38.33333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEUlEQVQoz41Ra2+DMAzk//+/PTuJdyoCTUICSWiBm+wqG6v6YZYsc+buFNuZMQaXywVaawxDD6UUYggIMcKHAGsdbrcb9n3/V2ZkRCZkaq3FOI7QxsC5u9GyLFjXlcnbth3yEW9Y1w1ZXhQ4nb7w/vGJTkp0XYeX1zc0TQsKMkrGv8IV1+uV69GQIpNS8ngkIpLWCn3f87f3HsEHiLNAK8QdhwBnHeq6gjYj43meufLIZVnymNQkAZmVVcU49Zqm4ZeTiLAdLYo8hzIGwfu/hn0/wLkJMQbEGKGVQtu0P6+hlLLjdSQ8TROEEBitZQ1xqbJhXdf8M+0rLf94ubSjx97jhXmHdGEa+VkciQk/4xzjG3A3bQdlt+UtAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="image-20210621210450012" title="image-20210621210450012" src="/static/ad827bc9041213bc34efcaac00e6aff9/99072/razor-pages-model-binding-multiple-htmlview.png" srcSet="/static/ad827bc9041213bc34efcaac00e6aff9/5a46d/razor-pages-model-binding-multiple-htmlview.png 300w,/static/ad827bc9041213bc34efcaac00e6aff9/0a47e/razor-pages-model-binding-multiple-htmlview.png 600w,/static/ad827bc9041213bc34efcaac00e6aff9/99072/razor-pages-model-binding-multiple-htmlview.png 842w" sizes="(max-width: 842px) 100vw, 842px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><p>And when we post back, the debugger shows the bound values:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:752px">
      <a class="gatsby-resp-image-link" href="/static/eb9429ab9359081df778f799cfbac2a3/442cb/razor-pages-model-binding-multiple-debuggerview.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:39.666666666666664%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVQoz42S247TQBBE/SVks1nfxs54PL7F8SbxbTCLogXJImhRVoH//4iD7IUoPIB4KPU89FR3VZe1EgFqm+JrOSMtK2SSce8Jlq7Pveu/VU/8F6wHEWKHIVN11hJnrbBD+dbgB1csHI+7W/wasrwhmwZbS1ewCgRxlVPuG1Siqc3ArjPs+/cMH4881i27uiXJNwipWCuNv46umy9/q5gIgygizhNklhJlOZ7wCeOEIE4QkWLXPpEXFbHSFEXJptiyLR/J8g2R0kQqIdYpaVrMw2bJK09w5/hXKQvbnd/vHmzKw8ChMTNR1xnquqVte4wZGIYnmqajqnYcJnU6myT/3fSJNMkKXl+/c7n84Pn5M8Z8YBy/cjq9cDx+ou0MXigJpMINJNatoX/44Yl5U6kzzucL317OtK2h7wfG8cQ4fqFpespqz8Jxr/+sf0VgarBFOJNOUQqURkQxa53OCCKNd3OcKTY/AX6m+qnd1cW2AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="image-20210621211423544" title="image-20210621211423544" src="/static/eb9429ab9359081df778f799cfbac2a3/442cb/razor-pages-model-binding-multiple-debuggerview.png" srcSet="/static/eb9429ab9359081df778f799cfbac2a3/5a46d/razor-pages-model-binding-multiple-debuggerview.png 300w,/static/eb9429ab9359081df778f799cfbac2a3/0a47e/razor-pages-model-binding-multiple-debuggerview.png 600w,/static/eb9429ab9359081df778f799cfbac2a3/442cb/razor-pages-model-binding-multiple-debuggerview.png 752w" sizes="(max-width: 752px) 100vw, 752px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p><a href="/blog">back</a></main><footer>Made with <a href="https://www.gatsbyjs.com/">Gatsby</a> and <span role="img" aria-label="Heart emoji">💗</span></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/aspnet-razorpages-model-binding/";window.___webpackCompilationHash="a1e819e0b1c501bd7879";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-db109019bff945921aa3.js"],"app":["/app-d93e2701d6ecd8d2c363.js"],"component---src-pages-404-js":["/component---src-pages-404-js-f982e21b29e5e7bc41b1.js"],"component---src-pages-about-js":["/component---src-pages-about-js-d2d51fe9811663bc1bbc.js"],"component---src-pages-blog-index-js":["/component---src-pages-blog-index-js-55b40fca4cedef26683b.js"],"component---src-pages-blog-mdx-slug-js":["/component---src-pages-blog-mdx-slug-js-03812f15af53db1b7206.js"],"component---src-pages-index-js":["/component---src-pages-index-js-08eccf748c1113b6bb14.js"]};/*]]>*/</script><script src="/polyfill-db109019bff945921aa3.js" nomodule=""></script><script src="/component---src-pages-blog-mdx-slug-js-03812f15af53db1b7206.js" async=""></script><script src="/app-d93e2701d6ecd8d2c363.js" async=""></script><script src="/framework-f24c3fbb71f117e223ab.js" async=""></script><script src="/webpack-runtime-0c2617bdcefff67311f8.js" async=""></script></body></html>